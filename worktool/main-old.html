<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>크로스핏판 워크툴</title>
  
  <!-- 🎨 새로운 CSS 파일들 적용 -->
  <link rel="stylesheet" href="assets/css/variables.css">
  <link rel="stylesheet" href="assets/css/common.css">
  <link rel="stylesheet" href="assets/css/components.css">
  
  <!-- 📱 반응형 CSS (기존 코드에서 추출) -->
  <style>
    /* 🏢 신창점 전용 컨테이너 스타일 */
    .shin-container {
      flex-grow: 1;
      transition: opacity var(--transition-normal);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .shin-stack {
      position: relative;
      width: 100%;
      height: 100%;
      min-height: 400px;
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-lg);
      box-sizing: border-box;
      flex-grow: 1;
      overflow: hidden;
    }

    .shin-stack iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
      border: 0;
      border-radius: var(--radius-lg);
      transform: scale(1.0);
      transform-origin: top left;
      background: var(--white);
    }

    /* 메인 토글 버튼 반응형 */
    @media screen and (max-width: 1200px) {
      .toggle-button {
        flex: 1 1 calc(25% - var(--space-2));
        min-width: 110px;
      }
    }

    @media screen and (max-width: 768px) {
      .toggle-container {
        gap: var(--space-1);
      }
      
      .toggle-button {
        flex: 1 1 calc(50% - var(--space-1));
        min-width: 90px;
        max-width: none;
        padding: var(--space-3) var(--space-2);
        font-size: var(--font-size-sm);
      }

      .button-icon {
        font-size: var(--font-size-2xl);
      }

      .branch-buttons {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-1);
      }

      .branch-toggle-button {
        padding: var(--space-2) var(--space-1);
        font-size: var(--font-size-xs);
      }

      iframe {
        width: 110% !important;
        height: 100% !important;
        transform-origin: top left !important;
        transform: scale(0.91) !important;
        border-radius: var(--radius-lg) !important;
      }

      .dataFrame-container {
        border-radius: var(--radius-lg);
        height: 800px;
        min-height: 800px;
      }

      .shin-stack {
        border-radius: var(--radius-lg);
        min-height: 800px;
      }

      .shin-stack iframe {
        width: 110% !important;
        height: 100% !important;
        transform: scale(0.91) !important;
        transform-origin: top left !important;
        border-radius: var(--radius-lg) !important;
      }
    }

    @media screen and (max-height: 600px) {
      .result-container {
        padding: var(--space-3);
      }
      
      .toggle-button {
        padding: var(--space-2) var(--space-1);
        font-size: var(--font-size-xs);
      }

      .button-icon {
        font-size: var(--font-size-xl);
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- 메인 버튼 컨테이너 -->
    <div class="result-container">
      <div class="toggle-container">
        <button class="toggle-button active" id="button1">
          <div class="button-icon">📊</div>
          종합현황 차트
        </button>
        <button class="toggle-button" id="button2">
          <div class="button-icon">📅</div>
          월단위 달성현황
        </button>
        <button class="toggle-button" id="button3">
          <div class="button-icon">💰</div>
          인센내역 및 정책
        </button>
        <button class="toggle-button" id="button4">
          <div class="button-icon">👥</div>
          연간 회원수
        </button>
        <button class="toggle-button" id="button5">
          <div class="button-icon">🏢</div>
          지점 대시보드
        </button>
        <button class="toggle-button special" id="button6">
          <div class="button-icon">📋</div>
          이월대상자
        </button>
        <button class="toggle-button special" id="button7">
          <div class="button-icon">❌</div>
          노쇼체크
        </button>
        <button class="toggle-button" id="button8">
          <div class="button-icon">📦</div>
          배송상품 확인
        </button>
      </div>

      <!-- 지점 대시보드 서브 버튼들 -->
      <div class="branch-sub-container" id="branchSubContainer">
        <div class="branch-buttons">
          <button class="branch-toggle-button sangmu active" 
            data-url="https://lookerstudio.google.com/embed/reporting/64be6fe1-640e-457b-9108-1c70d60e666e/page/buSUF">
            🌿 상무점 대시보드
          </button>
          <button class="branch-toggle-button sinchang" 
            data-url="https://lookerstudio.google.com/embed/reporting/64be6fe1-640e-457b-9108-1c70d60e666e/page/p_gfze1gk9ud" 
            id="shinBtn">
            💙 신창점 대시보드
          </button>
          <button class="branch-toggle-button ochi" 
            data-url="https://lookerstudio.google.com/embed/reporting/64be6fe1-640e-457b-9108-1c70d60e666e/page/p_suzy22l9ud">
            🧡 오치점 대시보드
          </button>
          <button class="branch-toggle-button staff" 
            data-url="https://lookerstudio.google.com/embed/reporting/64be6fe1-640e-457b-9108-1c70d60e666e/page/p_d1s8t8pavd">
            👨‍💼 전지점 담당자별 등록률
          </button>
        </div>
      </div>
    </div>
    
    <!-- 데이터 표시 영역 -->
    <div class="dataFrame-container" id="dataFrameContainer">
      <div class="loading-overlay"></div>
      <div class="loader"></div>
      
      <!-- 신창점 전용 컨테이너 -->
      <div id="shinContainer" class="shin-container" hidden>
        <div class="shin-stack">
          <iframe id="shinBranchFrame"
            src="https://lookerstudio.google.com/embed/reporting/64be6fe1-640e-457b-9108-1c70d60e666e/page/p_gfze1gk9ud"
            title="신창점 대시보드" allowfullscreen loading="eager"></iframe>
          <iframe id="shinStaffFrame"
            src="https://lookerstudio.google.com/embed/reporting/695906da-94dd-4027-aa85-300c66ba158e/page/eMJQF"
            title="담당자 대시보드" allowfullscreen loading="eager" hidden></iframe>
        </div>
      </div>
      
      <!-- 일반 iframe -->
      <iframe id="dataFrame"></iframe>
    </div>
  </div>

  <!-- 🚀 새로 분리된 JavaScript 파일들 -->
  <script src="assets/js/config.js"></script>
  <script src="assets/js/components.js"></script>
  <script src="assets/js/main.js"></script>
</body>
</html> = '400px';
        shinStack.style.position = 'relative';
      }
      
      // iframe 표시/숨김 처리
      shinBranchFrame.hidden = shinIsStaffMode;
      shinStaffFrame.hidden = !shinIsStaffMode;
      
      // 레이아웃 재계산 강제 실행
      setTimeout(() => {
        window.dispatchEvent(new Event('resize'));
        
        // iframe 높이 재설정 (강제)
        const activeFrame = shinIsStaffMode ? shinStaffFrame : shinBranchFrame;
        if (activeFrame && shinStack) {
          activeFrame.style.height = '100%';
          activeFrame.style.minHeight = shinStack.offsetHeight + 'px';
        }
      }, 100);
    };

    // 📄 일반 페이지 표시 함수
    const showCommon = (url) => {
      shinContainer.hidden = true;
      shinContainer.style.display = 'none';
      dataFrame.hidden = false;
      dataFrame.style.display = 'block';
      updateFrame(url);
      shinIsStaffMode = false;
      updateShinLabel();
    };

    // 🎯 메인 버튼 설정
    function setupMainButtons() {
      // 일반 메인 버튼들
      ['button1', 'button2', 'button3', 'button4', 'button6', 'button7', 'button8'].forEach(buttonId => {
        document.getElementById(buttonId).addEventListener('click', () => {
          activateButton(document.getElementById(buttonId), true);
          branchSubContainer.classList.remove('show');
          branchSubVisible = false;
          shinContainer.hidden = true;
          dataFrame.hidden = false;
          updateFrame(dataUrls[buttonId]);
          
          scrollToElement(dataFrameContainer, 10);
        });
      });

      // 지점 대시보드 버튼
      document.getElementById('button5').addEventListener('click', () => {
        activateButton(document.getElementById('button5'), true);
        
        if (!branchSubVisible) {
          branchSubContainer.classList.add('show');
          branchSubVisible = true;
          
          branchButtons.forEach((b, index) => {
            b.classList.remove("active");
            if (index === lastSelectedBranchIndex) {
              b.classList.add("active");
            }
          });
          
          const selectedButton = branchButtons[lastSelectedBranchIndex];
          if (selectedButton === shinBtn) {
            showShin();
          } else {
            shinContainer.hidden = true;
            dataFrame.hidden = false;
            updateFrame(selectedButton.dataset.url);
          }
          
          scrollToElement(branchSubContainer, 10);
        } else {
          branchSubContainer.classList.remove('show');
          branchSubVisible = false;
          scrollToElement(dataFrameContainer, 10);
        }
        
        updateShinLabel();
      });
    }

    // 🏢 지점 버튼 설정
    function setupBranchButtons() {
      branchButtons.forEach((btn, index) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();

          lastSelectedBranchIndex = index;

          if (btn === shinBtn) {
            if (!shinBtn.classList.contains("active")) {
              activateButton(shinBtn);
              shinIsStaffMode = false;
              updateShinLabel();
              showShin();
              return;
            }
            
            shinIsStaffMode = !shinIsStaffMode;
            updateShinLabel();
            showShin();
            return;
          }

          activateButton(btn);
          showCommon(btn.dataset.url);
        });
      });
    }

    // 🚀 초기화 함수
    document.addEventListener('DOMContentLoaded', function() {
      setupMainButtons();
      setupBranchButtons();
      
      updateFrame(dataUrls.button1);
      
      shinIsStaffMode = false;
      updateShinLabel();
      
      console.log('🎉 크로스핏판 워크툴이 성공적으로 로드되었습니다!');
    });
  </script>
</body>
</html>